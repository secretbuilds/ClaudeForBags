# API Endpoints Reference

Raw API endpoints for edge cases. **Prefer SDK for most operations.**

## Base Configuration

```
Base URL: https://public-api-v2.bags.fm/api/v1/
Auth Header: x-api-key: YOUR_API_KEY
Rate Limit: 1,000 requests/hour per user
Rate Limit Headers: X-RateLimit-Remaining, X-RateLimit-Reset
```

## Response Format

```typescript
// Success
{ success: true, response: { ...data } }

// Error
{ success: false, error: "Error message" }
```

## Token Launch Endpoints

### POST /token/create-info
Create token metadata and mint.

```typescript
// Request
{
  imageUrl: string,      // Required
  name: string,          // Required
  symbol: string,        // Required
  description: string,   // Required
  twitter?: string,
  website?: string,
  telegram?: string
}

// Response
{
  tokenMint: string,      // Base58 mint address
  tokenMetadata: string   // IPFS URL
}
```

### POST /token/create-launch-transaction
Create launch transaction.

```typescript
// Request
{
  metadataUrl: string,
  tokenMint: string,        // Base58
  launchWallet: string,     // Base58
  initialBuyLamports: number,
  configKey: string         // Base58
}

// Response
{
  transaction: string       // Base64 serialized VersionedTransaction
}
```

## Fee Share Endpoints

### POST /fee-share/create-config
Create fee share configuration.

```typescript
// Request
{
  payer: string,            // Base58
  baseMint: string,         // Base58
  feeClaimers: Array<{
    user: string,           // Base58
    userBps: number
  }>,
  partner?: string,         // Base58
  partnerConfig?: string,   // Base58
  additionalLookupTables?: string[]  // Base58[]
}

// Response
{
  meteoraConfigKey: string,
  transactions: string[],    // Base64 serialized
  bundles?: string[][]       // For Jito bundling
}
```

### GET /fee-share/claimable-positions?wallet={wallet}
Get claimable positions.

```typescript
// Response
{
  positions: Array<{
    baseMint: string,
    virtualPoolAddress: string,
    virtualPoolClaimableAmount?: string,
    dammPoolClaimableAmount?: string,
    isCustomFeeVault: boolean,
    // ... additional fields
  }>
}
```

### POST /fee-share/claim-transactions
Generate claim transactions.

```typescript
// Request
{
  wallet: string,           // Base58
  position: ClaimablePosition
}

// Response
{
  transactions: string[]    // Base64 serialized
}
```

### GET /fee-share/wallet?username={username}&provider={provider}
Resolve social username to wallet.

```typescript
// provider: "twitter" | "kick" | "github"

// Response
{
  wallet: string            // Base58
}
```

### POST /fee-share/wallet/bulk
Bulk resolve usernames.

```typescript
// Request
{
  users: Array<{
    username: string,
    provider: "twitter" | "kick" | "github"
  }>
}

// Response
{
  wallets: Array<{
    username: string,
    provider: string,
    wallet: string
  }>
}
```

## Partner Endpoints

### POST /fee-share/partner-config/create
Create partner configuration.

```typescript
// Request
{
  partner: string           // Base58 wallet
}

// Response
{
  transaction: string,      // Base64 serialized
  blockhash: string
}
```

### GET /fee-share/partner-config/stats?partner={wallet}
Get partner statistics.

```typescript
// Response
{
  claimedFees: string,      // Lamports as string
  unclaimedFees: string
}
```

### POST /fee-share/partner-config/claim
Generate partner claim transactions.

```typescript
// Request
{
  partner: string           // Base58 wallet
}

// Response
{
  transactions: string[]    // Base64 serialized
}
```

## Analytics Endpoints

### GET /state/token-lifetime-fees?tokenMint={mint}
Get total fees generated by token.

```typescript
// Response
{
  fees: number              // Lamports
}
```

### GET /state/token-creators?tokenMint={mint}
Get token creators/deployers.

```typescript
// Response
{
  creators: Array<{
    wallet: string,
    provider?: string,       // Platform logo identifier
    username?: string,       // Bags internal username
    providerUsername?: string // Display this if present
  }>
}
```

### GET /state/token-claim-stats?tokenMint={mint}
Get claim statistics per claimer.

```typescript
// Response
{
  stats: Array<{
    claimer: string,
    totalClaimed: string    // Lamports
  }>
}
```

## Trade Endpoints

### POST /trade/quote
Get swap quote.

```typescript
// Request
{
  inputMint: string,        // Base58
  outputMint: string,       // Base58
  amount: number,           // In smallest unit
  slippageMode: "auto" | "manual",
  slippageBps?: number      // Required if manual
}

// Response
{
  requestId: string,
  inAmount: string,
  outAmount: string,
  minOutAmount: string,
  priceImpactPct: string,
  slippageBps: number,
  routePlan: Array<{
    venue: string,
    inputMint: string,
    outputMint: string,
    inAmount: string,
    outAmount: string
  }>
}
```

### POST /trade/swap
Create swap transaction.

```typescript
// Request
{
  quoteResponse: QuoteResponse,  // From /trade/quote
  userPublicKey: string          // Base58
}

// Response
{
  transaction: string,           // Base64 serialized
  computeUnitLimit: number,
  lastValidBlockHeight: number,
  prioritizationFeeLamports: number
}
```

## Lookup Tables Endpoints

### POST /fee-share/lut/create
Create lookup tables for >15 claimers.

```typescript
// Request
{
  payer: string,            // Base58
  baseMint: string,         // Base58
  feeClaimers: Array<{ user: string, userBps: number }>
}

// Response
{
  creationTransaction: string,    // Base64
  extendTransactions: string[],   // Base64[]
  lutAddresses: string[]          // Base58[]
}
```

### GET /state/pool-config-keys?vaults={vault1,vault2}
Get pool config keys from fee claimer vaults.

```typescript
// Response
{
  configKeys: Array<{
    vault: string,
    configKey: string | null
  }>
}
```

## Utility Endpoints

### POST /upload
Upload file (for token images).

```typescript
// Content-Type: multipart/form-data
// Field: file

// Response
{
  url: string               // CDN URL for image
}
```

## Error Codes

| HTTP Code | Meaning |
|-----------|---------|
| 400 | Bad request (invalid params) |
| 401 | Unauthorized (invalid/missing API key) |
| 404 | Resource not found |
| 429 | Rate limited |
| 500 | Server error |

## Transaction Handling

API returns Base64 serialized transactions. To use:

```typescript
import { VersionedTransaction } from "@solana/web3.js";

// Deserialize
const txBuffer = Buffer.from(base64Transaction, "base64");
const transaction = VersionedTransaction.deserialize(txBuffer);

// Sign
transaction.sign([keypair]);

// Send
const signature = await connection.sendTransaction(transaction);
```

**For token launches, always use Jito bundling** â€” direct submission will likely fail due to MEV.
